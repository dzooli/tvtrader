[{"kind":1,"language":"markdown","value":"# Description\r\n\r\nThis is a simple application backend for receiving alerts from TradingView. It has two endpoints one for the frontend application (see ../../frontend) and the another for forwarding the alerts to a Carbon datastore from where people is able to do further processing or visualization (for example with Grafana).","outputs":[]},{"kind":1,"language":"markdown","value":"# Test cases for the backend","outputs":[]},{"kind":1,"language":"markdown","value":"## Healthcheck\r\n\r\n__Endpoint: /__\r\n\r\nMethod: __GET__\r\n\r\nParameters: -\r\n\r\n__Valid response:__\r\n\"HEALTHY TradingView Trader\"","outputs":[]},{"kind":2,"language":"rest-book","value":"GET http://localhost:8089/\nAccept-Encoding: application/json","outputs":[{"mime":"x-application/rest-book","value":{"status":200,"statusText":"OK","headers":{"Content-Type":"application/json","Content-Length":"28","Connection":"close"},"config":{"timeout":10000,"xsrfCookieName":"XSRF-TOKEN","xsrfHeaderName":"X-XSRF-TOKEN","headers":{"Accept":"application/json, text/plain, */*","Accept-Encoding":"application/json","User-Agent":"axios/0.21.4"}},"request":{"method":"GET","httpVersion":"1.1","responseUrl":"http://localhost:8089/","timeout":10000,"headers":{"Accept-Encoding":"application/json"}},"data":"HEALTHY TradingView Trader"}},{"mime":"text/x-json","value":{"status":200,"statusText":"OK","headers":{"Content-Type":"application/json","Content-Length":"28","Connection":"close"},"config":{"timeout":10000,"xsrfCookieName":"XSRF-TOKEN","xsrfHeaderName":"X-XSRF-TOKEN","headers":{"Accept":"application/json, text/plain, */*","Accept-Encoding":"application/json","User-Agent":"axios/0.21.4"}},"request":{"method":"GET","httpVersion":"1.1","responseUrl":"http://localhost:8089/","timeout":10000,"headers":{"Accept-Encoding":"application/json"}},"data":"HEALTHY TradingView Trader"}},{"mime":"text/html","value":"HEALTHY TradingView Trader"}]},{"kind":1,"language":"markdown","value":"## Send frontend alerts\r\n\r\n__Endpoint: /alert__\r\n\r\nMethod: __POST__\r\n\r\nContent-Type: application/json\r\n\r\n### No data\r\n\r\n__Valid response:__ \"400\"\r\n\r\nPOST without data is not allowed.","outputs":[]},{"kind":2,"language":"rest-book","value":"POST http://localhost:8089/alert","outputs":[{"mime":"x-application/rest-book","value":{"status":400,"statusText":"Bad Request","headers":{"Content-Type":"application/json","Content-Length":"1157","Connection":"close"},"config":{"timeout":10000,"xsrfCookieName":"XSRF-TOKEN","xsrfHeaderName":"X-XSRF-TOKEN","headers":{"Accept":"application/json, text/plain, */*","Content-Type":"application/x-www-form-urlencoded","User-Agent":"axios/0.21.4"}},"request":{"method":"POST","httpVersion":"1.1","responseUrl":"http://localhost:8089/alert","timeout":10000,"headers":{}},"data":{"description":"Bad Request","status":400,"message":"Invalid request body: TradingViewAlert. Error: Value 'None' is not a dict","path":"/alert","args":{},"exceptions":[{"type":"ValidationError","exception":"Invalid request body: TradingViewAlert. Error: Value 'None' is not a dict","frames":[{"file":"C:\\Users\\fabia\\Documents\\projects\\prog\\tvtrader\\backend\\lib\\site-packages\\sanic\\app.py","line":901,"name":"handle_request","src":"response = await response"},{"file":"C:\\Users\\fabia\\Documents\\projects\\prog\\tvtrader\\backend\\lib\\site-packages\\sanic_ext\\extras\\validation\\decorator.py","line":45,"name":"decorated_function","src":"await do_validation("},{"file":"C:\\Users\\fabia\\Documents\\projects\\prog\\tvtrader\\backend\\lib\\site-packages\\sanic_ext\\extras\\validation\\setup.py","line":35,"name":"do_validation","src":"validation = validate_body(validator, model, data)"},{"file":"C:\\Users\\fabia\\Documents\\projects\\prog\\tvtrader\\backend\\lib\\site-packages\\sanic_ext\\extras\\validation\\validators.py","line":26,"name":"validate_body","src":"raise ValidationError("}]}]}}},{"mime":"text/x-json","value":{"status":400,"statusText":"Bad Request","headers":{"Content-Type":"application/json","Content-Length":"1157","Connection":"close"},"config":{"timeout":10000,"xsrfCookieName":"XSRF-TOKEN","xsrfHeaderName":"X-XSRF-TOKEN","headers":{"Accept":"application/json, text/plain, */*","Content-Type":"application/x-www-form-urlencoded","User-Agent":"axios/0.21.4"}},"request":{"method":"POST","httpVersion":"1.1","responseUrl":"http://localhost:8089/alert","timeout":10000,"headers":{}},"data":{"description":"Bad Request","status":400,"message":"Invalid request body: TradingViewAlert. Error: Value 'None' is not a dict","path":"/alert","args":{},"exceptions":[{"type":"ValidationError","exception":"Invalid request body: TradingViewAlert. Error: Value 'None' is not a dict","frames":[{"file":"C:\\Users\\fabia\\Documents\\projects\\prog\\tvtrader\\backend\\lib\\site-packages\\sanic\\app.py","line":901,"name":"handle_request","src":"response = await response"},{"file":"C:\\Users\\fabia\\Documents\\projects\\prog\\tvtrader\\backend\\lib\\site-packages\\sanic_ext\\extras\\validation\\decorator.py","line":45,"name":"decorated_function","src":"await do_validation("},{"file":"C:\\Users\\fabia\\Documents\\projects\\prog\\tvtrader\\backend\\lib\\site-packages\\sanic_ext\\extras\\validation\\setup.py","line":35,"name":"do_validation","src":"validation = validate_body(validator, model, data)"},{"file":"C:\\Users\\fabia\\Documents\\projects\\prog\\tvtrader\\backend\\lib\\site-packages\\sanic_ext\\extras\\validation\\validators.py","line":26,"name":"validate_body","src":"raise ValidationError("}]}]}}},{"mime":"text/html","value":"[object Object]"}]},{"kind":1,"language":"markdown","value":"### Send real data\r\n\r\n__Valid response:__ \"OK\"\r\n\r\nExample data:\r\n```json\r\n{\r\n    \"stratId\": 1,\r\n    \"symbol\": \"GBPUSD\",\r\n    \"stratName\": \"HELLO\",\r\n    \"direction\": \"BUY\",\r\n    \"interval\": 15,\r\n    \"timestamp\": \"2019-08-27T09:56:00Z\"\r\n}\r\n```","outputs":[]},{"kind":2,"language":"rest-book","value":"POST http://localhost:8089/alert\nContent-Type: application/json\n\n{\n    \"stratId\": 0,\n    \"stratName\": \"HELLO\",\n    \"symbol\": \"FXCM:GBPUSD\",\n    \"direction\": \"SELL\",\n    \"interval\": 15,\n    \"timestamp\": \"2019-08-27T09:56:00Z\"\n}","outputs":[{"mime":"x-application/rest-book","value":{"status":200,"statusText":"OK","headers":{"Content-Type":"application/json","Content-Length":"4","Connection":"close"},"config":{"timeout":10000,"xsrfCookieName":"XSRF-TOKEN","xsrfHeaderName":"X-XSRF-TOKEN","headers":{"Accept":"application/json, text/plain, */*","Content-Type":"application/json","User-Agent":"axios/0.21.4","Content-Length":124}},"request":{"method":"POST","httpVersion":"1.1","responseUrl":"http://localhost:8089/alert","timeout":10000,"headers":{"Content-Type":"application/json"},"data":{"stratId":0,"stratName":"HELLO","symbol":"FXCM:GBPUSD","direction":"SELL","interval":15,"timestamp":"2019-08-27T09:56:00Z"}},"data":"OK"}},{"mime":"text/x-json","value":{"status":200,"statusText":"OK","headers":{"Content-Type":"application/json","Content-Length":"4","Connection":"close"},"config":{"timeout":10000,"xsrfCookieName":"XSRF-TOKEN","xsrfHeaderName":"X-XSRF-TOKEN","headers":{"Accept":"application/json, text/plain, */*","Content-Type":"application/json","User-Agent":"axios/0.21.4","Content-Length":124}},"request":{"method":"POST","httpVersion":"1.1","responseUrl":"http://localhost:8089/alert","timeout":10000,"headers":{"Content-Type":"application/json"},"data":{"stratId":0,"stratName":"HELLO","symbol":"FXCM:GBPUSD","direction":"SELL","interval":15,"timestamp":"2019-08-27T09:56:00Z"}},"data":"OK"}},{"mime":"text/html","value":"OK"}]},{"kind":1,"language":"markdown","value":"### Send invalid data\r\n\r\n#### Missing interval\r\n\r\n```json\r\n{\r\n    \"stratId\": 1,\r\n    \"stratName\": \"LRATR\",\r\n    \"symbol\": \"FXCM:GBPUSD\",\r\n    \"direction\": \"SELL\",\r\n    \"timestamp\": \"2019-08-27T09:56:00Z\"\r\n}\r\n```","outputs":[]},{"kind":2,"language":"rest-book","value":"POST http://localhost:8089/alert\r\nContent-Type: application/json\r\n\r\n{\r\n    \"stratId\": 0,\r\n    \"stratName\": \"HELLO\",\r\n    \"symbol\": \"FXCM:GBPUSD\",\r\n    \"direction\": \"SELL\",\r\n    \"timestamp\": \"2019-08-27T09:56:00Z\"\r\n}","outputs":[]},{"kind":1,"language":"markdown","value":"### Get allowed methods\r\n\r\nMethod: __OPTIONS__","outputs":[]},{"kind":2,"language":"rest-book","value":"OPTIONS http://localhost:8089/alert\r\nAccess-Control-Request-Method: POST\r\n","outputs":[]},{"kind":2,"language":"rest-book","value":"","outputs":[]}]